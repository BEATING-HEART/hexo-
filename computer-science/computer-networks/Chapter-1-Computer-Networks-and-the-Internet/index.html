<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="鑄日" href="http://blog.sunforge.cn/rss.xml"><link rel="alternate" type="application/atom+xml" title="鑄日" href="http://blog.sunforge.cn/atom.xml"><link rel="alternate" type="application/json" title="鑄日" href="http://blog.sunforge.cn/feed.json"><link rel="stylesheet" href="//fonts.sourcegcdn.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="笔记"><link rel="canonical" href="http://blog.sunforge.cn/computer-science/computer-networks/Chapter-1-Computer-Networks-and-the-Internet/"><title>Chapter 1 Computer Networks and the Internet - 计算机网络 - 计算机科学 | Sunforge = 鑄日 = 浩蕩長夜 至此而終</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Chapter 1 Computer Networks and the Internet</h1><div class="meta"><span class="item" title="创建时间：2022-09-11 13:00:18"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-09-11T13:00:18+08:00">2022-09-11</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>6.4k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>6 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Sunforge</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gicitcxhpij20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gipexe4oykj20zk0m87ji.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giclj9410cj20zk0m8h12.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giclhfehz7j20zk0m8u0x.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giciryrr3rj20zk0m8nhk.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giciszlczyj20zk0m816d.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于 计算机科学"><span itemprop="name">计算机科学</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="item" rel="index" title="分类于 计算机网络"><span itemprop="name">计算机网络</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://blog.sunforge.cn/computer-science/computer-networks/Chapter-1-Computer-Networks-and-the-Internet/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Sunforge"><meta itemprop="description" content="浩蕩長夜 至此而終, 计科人笔记"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="鑄日"></span><div class="body md" itemprop="articleBody"><h1 id="什么是网络"><a class="anchor" href="#什么是网络">#</a> 什么是网络</h1><p><strong>互联网、网际</strong>：很多网络，通过网络互联设备连在一起（网络的网络）</p><ul><li><p><strong>网络</strong>：蜘蛛网、渔网、神经网络，包括节点和链路（图结构，与形状无关）</p></li><li><p><strong>计算机网络</strong>：联网的计算机构成的系统。</p><ul><li><strong>节点</strong>：<ul><li>包括主机节点（笔记本电脑、平板、手机、联网的冰箱、服务器等，源主机目标主机）</li><li>和数据交换节点（负载均衡设备、中继器、路由器、交换机等，既不是源也不是目标，起转发作用）</li></ul></li><li><strong>链路</strong>：连接主机和交换节点。连接交换节点和交换节点。<ul><li>分为接入网链路：主机接入到最近的交换机的链路</li><li>和主干链路：交换节点和交换节点之间的链路</li></ul></li><li><strong>协议</strong>：对等层实体，在通信过程中应该遵守的规则的集合。包括语法语义和时序</li></ul></li><li><p><strong>互联网</strong>：</p><ul><li>TCP/IP 协议为主的一族协议。由这些协议支撑起的那个网络就是互联网。Internet</li><li>如果与别人不连，但仍然也是依照 TCP/IP 协议工作，就是 intranet，企业网、内联网</li><li><strong>从构成的角度</strong>：是网络的网络<ul><li>拥有数以亿计的、互联的计算设备。<ul><li>包括主机：端系统，即 host 或 end system（用方框表示）</li><li>能够运行网络应用程序</li></ul></li><li>通信链路<ul><li>包括光纤、同轴电缆、无线电等</li><li>主要指标：传输速率（带宽 bps）</li></ul></li></ul></li><li>协议：互联网中所有行为都通过协议规范（显式的法律、隐式的校规）。包括语法语义时序动作。</li><li>标准：以互联网工程任务组 IETF 发布的 RFC 标准。</li><li><strong>从服务的角度</strong>：<ul><li>使用通信基础设施进行通信的分布式应用进程。<ul><li><strong>分布式应用</strong>：网络存在的理由</li><li><strong>通信基础设施</strong>：为分布式应用，提供远程的通信服务。包括应用层之下所有的应用实体，以及所有网络部分。</li></ul></li><li>通信基础设施为 apps 提供编程接口（通信服务）</li></ul></li></ul></li></ul><hr><blockquote><p>互联网，<strong>按照组成类型</strong>，分成一个个子系统（包括<strong>网络边缘</strong>、<strong>网络核心</strong>和<strong>接入网与物理媒体</strong>）</p><ul><li>边缘通过接入，连接核心</li><li>核心把所有边缘连在一起</li><li>任意两个端系统之间，可通信</li><li>接入形式：可以是移动接入，可以有线接入</li></ul></blockquote><h2 id="网络边缘边缘系统上存在的网络应用是网络存在的理由"><a class="anchor" href="#网络边缘边缘系统上存在的网络应用是网络存在的理由">#</a> 网络边缘：边缘系统上存在的网络应用，是网络存在的理由</h2><p><strong>应用进程之间通信的两种模式</strong></p><ol><li><strong>客户端服务器模式</strong></li></ol><p>​ 主机进一步分为客户端和服务器。客户端请求，服务端响应。资源在服务器。客户端依赖服务器。服务器要先运行起来，等待客户端请求。</p><p>​ 这种模式可扩展性较差。可能会导致宕机。可靠性也不高。</p><ol start="2"><li><strong>Peer-Peer 模式（对等模式，P2P 模式）</strong></li></ol><p>​ 每个结点，既是客户端又是服务器，是分布式的。在部分的会话中，是客户端，接受文件；但在另一部分会话中，是服务器，发送文件。</p><p>​ 你向其他迅雷客户端，请求文件片段。然后你拥有了一定的文件片段，又可以向其他用户提供文件片段。</p><p><strong>通信方式：采用网络基础设施提供的面向连接的通信服务</strong></p><ol><li><strong>TCP 服务</strong></li></ol><blockquote><p>可靠的，保序的。面向连接：通信状态在端系统中维护，网络不维护。有连接：通信状态端系统和网络都维护。</p><p>流量控制。协调发送接收速度。受到发送端接收端缓冲池大小。</p><p>拥塞控制。受到网络传输速度影响</p><p>HTTP，FTP，SMTP 等</p></blockquote><ol start="2"><li><strong>UDP 服务</strong>：用户数据报协议</li></ol><blockquote><p>无连接的，不可靠，没有流量控制，没有拥塞控制。</p><p>常用于：流媒体、远程会议、网络电话</p></blockquote><p>​</p><h2 id="网络核心数据交换"><a class="anchor" href="#网络核心数据交换">#</a> 网络核心：数据交换</h2><p>是路由器的网状网络。<strong>基本问题</strong>：数据如何通过网络进行传输</p><ul><li><p>电路交换（线路交换）</p><ul><li><p>为每个呼叫预留一条专有线路。如电话网</p></li><li><p>主机间通信，首先通过信令系统，在网络核心中，为两者的通信分配一条独享的线路。</p><ul><li><p>带宽很大，通过一系列的技术，可以进行分片复用（频分 FDM、时分 TDM、波分 WDM、码分 CDM）。</p><blockquote><p>频分：连续性得到部分带宽。以频段分割</p><p>时分：间歇性获得全部带宽。以时间周期性分割（时分，将每个周期都均分为时槽）</p></blockquote></li></ul></li><li><p>资源独享，可以保证性能。如果没有数据发送，资源就会被浪费。</p></li><li><p>建立时间长。且计算机间通信具有突发性，如果建立独占连接，那么浪费多。</p></li><li><p>可靠性不高。如果中心节点损毁，那么通信中断，影响范围大。</p></li></ul></li><li><p>分组交换：以分组为单位，存储转发</p><ul><li><p>节点之间通信链路不再细分为 pieces</p></li><li><p>主机主机之间通信数据分成 packet</p></li><li><p>以 packet 为单位，在每个交换节点中存储转发（先把分组存下来，然后再转发）</p><blockquote><p>为什么要存储转发？可以按需使用，如果不存储，就变成了独享。</p></blockquote></li><li><p>属于<strong>统计多路复用</strong>。分组没有固定的模式，是随机划分时间片的，是特殊的时分。</p></li><li><p>延迟：比线路交换大。</p><ul><li>节点中要消耗存储时间、排队时间。但作为交换，<strong>得到了共享性</strong>。但利用率高，避免浪费。</li><li><strong>在一个速率为 R bps 的链路（一跳），一个长度为 L bits 的分组的存储转发延时：L/R s</strong></li><li>排队延迟和丢失：如果路由器<strong>缓存满</strong>了，那么新来的分组，会<strong>被丢弃</strong>。</li></ul></li><li><p>过度使用会导致拥塞。</p></li></ul></li></ul><p>网路核心的关键功能：<strong>路由</strong>和<strong>转发</strong></p><ul><li>路由：决定分组采用的，从源到目标的路径。通过路由算法算出</li><li>转发：将分组从输入链路转发到输出链路</li></ul><p>存储转发的两个方式：<strong>数据报</strong>和<strong>虚电路</strong></p><ul><li>数据报：无需建立连接，有数据直接发送，每一个分组都独立路由（路径不一样，可能失序）路由器根据分组目标地址进行转发</li><li>虚电路：要建立虚电路表。靠信令建立。查表转发。</li></ul><h1 id="接入网和物理媒体"><a class="anchor" href="#接入网和物理媒体">#</a> 接入网和物理媒体</h1><p><strong>边缘系统通过接入网接入网络核心</strong>：接入网的带宽一般是共享的</p><ol><li><strong>住宅接入</strong>：modem，调制解调器。</li></ol><blockquote><p><strong>现行的解决方法是，专线铺到每家每户。但成本高。</strong></p><p>90 年代考虑利用现有的网络资源，让每家每户接入进来。（利用原来的电话线网络，通过调制解调器）</p><p>由于电话线穿的是语音，所以带宽只有 4 kHz。所以需要借助一些额外的设备。</p><p>装一个<strong>猫（起到调制解调的作用）</strong>，通过调频或调相位，连接电话网和互联网。在音频载波上，加载 01 的数据，就好像在载波上冲浪一样。</p><p>但这样，就与打电话形成了互斥。打电话时，不能上网。同样的，上网时，没办法打电话</p></blockquote><ol start="2"><li><strong>接入网</strong>：digital subscriber line，DSL（电信公司提供的上网网络）</li></ol><blockquote><p>能够保证 4 kHz 的带宽，高于 4 kHz 的部分，非对称地划分为上行带宽（小些）和下行带宽（大些）两个部分，<strong>称为 ADSL</strong>，并且同样采用调制解调的方法。</p><p>通过 ADSL 猫来上网。这样可以同时保证打电话和上网。</p></blockquote><ol start="3"><li><strong>接入网</strong>：线缆网络（有线电视公司提供的上网网络）</li></ol><blockquote><p>有线电视信号线缆的双向改造。（原来是单向，仅有下行带宽，电视公司用于广播电视信号）</p><p>现在通过双向改造，不同频段传输不同信道的通信数据。有些带宽是上行的，有些带宽是下行的。<strong>这些带宽是共享的</strong>。</p><p>往上层是光纤，往下是铜轴电缆。带宽划分非对称，最高 30 Mbps 的下行速率，最低 2 Mbps 的上行传输速率。</p></blockquote><ol start="4"><li><strong>住宅接入：电缆模式</strong></li></ol><blockquote><p>很多都采用了互联网电视。有限电视公司的业务在萎缩。</p></blockquote><ol start="5"><li><strong>无线接入网路</strong></li></ol><blockquote><p>WLANs，广域无线接入，无线局域网 WiFi</p></blockquote><ol start="6"><li><strong>企业接入网</strong>：Ethernet</li></ol><blockquote><p>被企业、大学等机构采用。现在端系统常直接接到以太网络交换机上。</p></blockquote><h1 id="物理媒体第0层"><a class="anchor" href="#物理媒体第0层">#</a> 物理媒体：第 0 层</h1><p>发送和接收两个节点。在两个节点对之间传送比特。</p><p>物理媒体：可以是 ** 光纤、铜轴电缆、以太网网线或者开放的空间（传送电磁波）** 等</p><ul><li>导引型媒体<ul><li>电磁波信号沿着固体媒体被导引（同轴电缆、光纤、双绞线）<ul><li>同轴电缆：连根同心的铜导线。是双向的。分为宽带电缆（多信道）和基带（窄带）电缆（单信道）。</li><li>双绞线：两根绝缘铜线绞合在一起。常用 5 类、6 类两种</li><li>光缆和光纤：不会受到电磁波干扰，涉及全反射理论。有单模光纤和多模光纤两类</li></ul></li></ul></li><li>非导引型媒体<ul><li>开放空间的<strong>无线链路</strong>，双向。受到传播环境影响<ul><li>地面微波</li><li>LAN（例如：WiFi）</li><li>wide-area 广域无线（例如：蜂窝）</li><li>卫星</li></ul></li></ul></li></ul><h1 id="internet结构和isp"><a class="anchor" href="#internet结构和isp">#</a> Internet 结构和 ISP</h1><p>互联网的结构：网络的网络</p><ul><li>ISP，Internet Service Provider 互联网服务提供商（提供入网）</li><li>ICP，Internet Content Provider 互联网内容服务商（提供业务）</li><li>IXP，Internet Exchange Point 互联网交换中心</li><li>端系统通过接入 ISPs（住宅、公司和学校的 ISPs）连接到互联网。</li><li>接入 ISPs 相应的，必须是互联的。所以任何两个端系统，才可以互相发送数据</li><li>经济政治策略影响互联网演化</li></ul><p><strong>问题：如何将 ISP 互联？演化过程：</strong></p><ul><li>全连接，两个 ISP 直接相连，可扩展性差，不可扩展。复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></li><li>每个 ISPs 都接入到 Global ISPs 中。以经济合约约束双方的行为。</li><li>Global ISPs 之间的竞争与合作</li></ul><p><strong>通常 ICP 如 Google 会在全球各地建造 DC（Data Center），然后自拉或者租用干线光缆，使得 DC 互联</strong>，原因有：</p><ul><li>ISP 的服务费用高</li><li>ISP 不能提供及时有效的服务</li><li>在大网里面部署专网，可以为用户提供较好的服务，并减少成本。</li><li>通常会在凉的地方（降温），高山之中（安全），地质稳定（不地震）</li></ul><p><strong>网络结构：</strong></p><ul><li>Tier1 ISP（中心，第一层 ISP，全球、全国范围，点少但带宽大，通过 peer 连接或者 IXP 连接）</li><li>Tier2 ISP：Rigional ISP，第二层 ISP，更小一些的，区域性的 ISP，可与一个或多个第一层 ISP 连接，也可以与其他第二层 ISP 连接</li><li>还有 Tier3 ISP 等</li><li>local ISP：access net，access ISP，终端通过 local ISP 接入。</li></ul><h1 id="分组延时-丢失和吞吐量"><a class="anchor" href="#分组延时-丢失和吞吐量">#</a> 分组延时、丢失和吞吐量</h1><p><strong>分组的丢失和延时是怎么发生的</strong>：路由器缓冲区中存在一个分组队列</p><blockquote><p>如果分组达到路由器的速率大于链路输出的能力，那么对应地，分组进入分组队列等待，造成延迟。</p><p><strong>四种延时</strong>每一跳都会产生这四种延时：</p><ul><li><strong>结点处理延时</strong>（校验错误，提取目标 ip 查路由表，进行其他处理，这个时间是比较固定的，可以预估，一般是微秒）</li><li><strong>排队延时</strong>（取决于网络使用情况，是随机的）</li><li><strong>传输延时</strong>（R 是链路带宽，L 是分组长度，将分组发送到链路上的时间是 L/R，是固定的，可以预估）</li><li><strong>传播延时</strong>（与距离以及传播速度有关，距离如果超近，可忽略）</li></ul><p>但是队列是有限的。如果队列已经满了，还来了新的分组，那么新分组就会被丢弃。这就是丢失。</p><p><strong>丢失了怎么办？</strong></p><ul><li>如果链路本身可靠，则由上一个结点重传</li><li>如果链路不可靠，则由源主机重传</li><li>如果是 UDP，那么根本不重传</li></ul><p>为什么不把队列调大一点，避免丢失？调大虽然不丢，如果有几千个分组，排队一两天到队头被转发，用户早就不耐烦了</p><p><strong>信道容量</strong>：局域网容量小，广域网容量大。</p><p><strong>流量强度</strong>：$$I=\frac {La}{R}$$，其中 L 是每个分组的长度，a 是单位时间内通过这条链路转发的分组数，R 是链路带宽。</p><ul><li>流量强度越接近极限值 1，排队延时越大。超过 1，排队延时无穷。流量强度越接近与 0 或较小的时候，排队延时就很小</li></ul></blockquote><p>同样的网络资源，分组交换允许更多的用户。</p><p>可以在 cmd 窗口运行 traceroute 命令，测量往返延迟，运用了<strong> ICMP 协议：互联网控制报文协议</strong>。分为 IP 头、TTL 以及 IP 数据。</p><p><strong>吞吐量</strong>：在源端和目标端之间的传输速率（数据量 / 时间单位）</p><ul><li>瞬间吞吐量：在一个点的速率</li><li>平均吞吐量：在一个长时间的平均值<ul><li>端到端的平均吞吐取决于瓶颈链路的大小。</li><li>实际情况，每一跳的链路，实际上都被很多用户共用，平分带宽。所以平分后的带宽才是瓶颈带宽</li></ul></li></ul><h1 id="协议层次和服务模型"><a class="anchor" href="#协议层次和服务模型">#</a> 协议层次和服务模型</h1><p><strong>引例</strong>：异地哲学家的交流，航线的功能和层次。</p><p><strong>分层的思想</strong>：把网络非常复杂的功能分解成功能明确的层次。每一层实现一个，或者一组功能。</p><ul><li>本层的一些功能可以被上层调用。上层可以调用的本层功能的子集，就是服务。</li><li>协议是水平的一个关系，本层的协议实体相互交互实行本层<strong>协议动作</strong>，形成新的服务特性</li><li>协议的实现：通过层间接口访问下层服务才能实现，通过下层服务交换 PDU，实现本层的功能</li><li>协议的目的：为上层提供更好的服务</li></ul><p><strong>服务和服务访问点</strong></p><blockquote><p><strong>服务提供者</strong>，通过层间界面具体的<strong> SAP 服务访问点</strong>，向<strong>服务用户</strong>提供服务。</p><p><strong>服务用户</strong>通过<strong>原语（提供服务的形式）<strong>使用</strong>服务提供者</strong>的服务，<strong>服务提供者</strong>通过原语向<strong>服务用户</strong>提供服务</p><p><strong>服务访问点</strong>：上层访问下层所提供服务的点</p></blockquote><p><strong>服务的形式</strong>：</p><ul><li>面向连接的服务，如 TCP（需要握手，建立连接）</li><li>无连接的服务，如 UDP（不需要建立连接）</li><li>服务是垂直的关系，层间的关系。</li></ul><p><strong>本层协议实现的时候，需要借助下层的服务。实现本层协议的目的，就是为了为上层提供更好的服务。</strong></p><p><strong>数据单元 DU</strong></p><ul><li>服务数据单元 SDU：上层要求传的东西。</li><li>SDU 穿过层间接口时，增加控制信息 ICR，变成了 IDU</li><li>穿过层间接口后，这个 ICR 就没用了，SDU 拿到之后，然后增加本层的 header，形成本层的 PDU。</li></ul><blockquote><p>如果 SDU 很大，那么可能会分成好几部分，分别加上 header，然后形成多个 PDU</p><p>也有可能 SDU 很小，那么我们可能会把好多个 SDU 拼在一起，然后加上 header，形成一个 PDU</p><p>header 一部分是从 ICR 转过来的，一部分是协议新加的。</p></blockquote><p><strong>PDU 的不同称呼</strong></p><p>应用层：应用报文 message</p><p>传输层：报文段（段）segment</p><p>网络层：分组（无连接：IP 数据报）packet</p><p>链路层：帧 frame</p><p>物理层：传的是比特 bit</p><p><strong>分层处理的好处</strong></p><p>概念化，结构清晰，分层参考模型。</p><p>结构化，分而治之。层间接口不变，那么层内具体实现无关，改变某一层的实现也不影响系统其他部分。</p><p>模块化，便于维护和系统升级。</p><p><strong>分层处理的坏处</strong></p><p>一层层实现，效率相对来说较低</p><p><strong>但总体来说，好处比坏处多得多</strong></p><hr><p><strong>Internet 协议栈（应用层最高，物理层最低）</strong></p><p>应用层（可以进行应用报文交互）</p><p>传输层（传输层借助网络层主机到主机的服务，实现进程到进程的区分，借助 socket 和端口等。TCP 可将不可靠变为可靠）</p><p>网络层（源主机到目标主机的端到端的传输，可能不可靠）</p><p>链路层（传输以帧为单位的数据，区分哪些比特是帧的开始，哪些比特是帧的结束，中间夹着的就是帧的数据，在相邻两点间传输帧）</p><p>物理层（把一个个 bit 中数字信号转化为媒体信号，承载在媒体上，然后从一点传到另一点，然后再将物理信号反转成数字信号）</p><p><strong>ISO 的 OSI 七层模型</strong></p><p>表示层：表示转换，解释传输的数据，关心语义方面的信息，不管怎么样编码。</p><p>会话层：数据交换的同步、检查、恢复。</p><p><strong>封装和解封装</strong></p><p>源主机大封装（按层从上到下封装），目的主机大解封装（按层从下到上解封装）。</p><p>路由器解封装三层（到网络层）。交换机解封装两层（到链路层）。</p><h1 id="计算机网络的发展历史"><a class="anchor" href="#计算机网络的发展历史">#</a> 计算机网络的发展历史</h1><p><strong>早期 1960 前</strong>：线路交换（不适合。**1.** 线路建立时间长代价大，**2.** 线路交换资源独享，不适合突发性很强的计算机通信，**3.** 可靠性不高，核心节点一旦损毁，影响很大）</p><p><strong>分组交换的研究 1962-1972</strong>：三个研究小组分别展开。突发性强的情况下，比较适合计算机之间的通信。</p><p>1969 年，第一个 ARPAnet 节点开始工作，给军方使用。这个节点叫做 IMP 接口报文处理机。1969 年底（4 个节点）。</p><p>1972 年，第一个 email 程序发布，ARPAnet 有了 15 个节点。</p><p><strong>专用网络和网络互联 1972-1980</strong></p><p>很多专用网络出现。但是标准多，混乱。IBM 内部的标准就有 40 多种。更不要说各种不同的公司要互联互通</p><p><strong>用覆盖的方式，解决网络互连</strong></p><p>如果弃用原来的所有设备，另起炉灶虽然好，可以解决互连，但成本大。</p><p>采用覆盖的方式，解决互连：ip 层之下，各个网络各管各的（每种类型的物理网络分配一个 ip 头），在 ip 层上统一成 ip 网络，路由器将 ip 数据报取出，然后转发，打入另一个物理网络。<strong>原来的网络可以完美利用</strong></p><p>网络 IP 提供的服务是最小限度的，尽力而为的服务。在端系统，通过 TCP 协议保证可靠。路由器不维护通信状态。</p><blockquote><p>投资保护性很强，包容性很强。只需要改变一下软件，网络就可以接入互联网。</p></blockquote><p><strong>NCP 协议变化为 TCP/IP（一层变两层）</strong></p><p>1983，ALOHA net 所有设备停机，进行软件升级，升级到新的协议栈。层次的变化，将主机设备和路由设备区分开来了。对当时来说也是一个</p><p><strong>IP 协议的包容性</strong>：在 IP 层上可以统一部署各种应用。IP 可以将底层的所有物理架构包容起来。</p><p><strong>1982 SMTP 协议</strong>可实现 email，<strong>1983 DNS 协议被定义</strong>实现域名解析，<strong>1985 实现了 FTP</strong>，<strong>1988 TCP</strong> 加入了拥塞控制</p><p>1990 左右，ARPAnet 是美国军方支持的，NSF net 是 ARPAnet 的访问网。</p><p><strong>1994 Netscape 公司成立</strong>弄出了 Netscape 浏览器。</p><p><strong>出现了</strong>即时通信、P2P 文件共享，等杀手级应用。促进了 ISP 扩容。但安全性问题以及地址不够的问题不断突出。</p><p><strong>2001 网络泡沫</strong>一些烂公司倒闭了，好公司（包括微软雅虎谷歌思科等）得以沉淀。</p><p>……</p><div class="tags"><a href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag"><i class="ic i-tag"></i> 笔记</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-10-18 20:44:06" itemprop="dateModified" datetime="2022-10-18T20:44:06+08:00">2022-10-18</time> </span><span id="computer-science/computer-networks/Chapter-1-Computer-Networks-and-the-Internet/" class="item leancloud_visitors" data-flag-title="Chapter 1 Computer Networks and the Internet" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Sunforge 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="Sunforge 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="Sunforge 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Sunforge <i class="ic i-at"><em>@</em></i>鑄日</li><li class="link"><strong>本文链接：</strong> <a href="http://blog.sunforge.cn/computer-science/computer-networks/Chapter-1-Computer-Networks-and-the-Internet/" title="Chapter 1 Computer Networks and the Internet">http://blog.sunforge.cn/computer-science/computer-networks/Chapter-1-Computer-Networks-and-the-Internet/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/hexo/%E6%9B%B4%E6%96%B0Hexo%E4%B8%BB%E9%A2%98%E4%B8%BAShoka/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva4.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclip4jbpj20zk0m87cv.jpg" title="更新Hexo主题为Shoka"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Hexo 博客</span><h3>更新Hexo主题为Shoka</h3></a></div><div class="item right"><a href="/computer-science/computer-networks/Chapter-2-Application-Layer/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva4.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclg5ms2rj20zk0m8u0x.jpg" title="Chapter 2 Application Layer"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 计算机网络</span><h3>Chapter 2 Application Layer</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BD%91%E7%BB%9C"><span class="toc-number">1.</span> <span class="toc-text">什么是网络</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%BE%B9%E7%BC%98%E8%BE%B9%E7%BC%98%E7%B3%BB%E7%BB%9F%E4%B8%8A%E5%AD%98%E5%9C%A8%E7%9A%84%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%98%AF%E7%BD%91%E7%BB%9C%E5%AD%98%E5%9C%A8%E7%9A%84%E7%90%86%E7%94%B1"><span class="toc-number">1.1.</span> <span class="toc-text">网络边缘：边缘系统上存在的网络应用，是网络存在的理由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.2.</span> <span class="toc-text">网络核心：数据交换</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A5%E5%85%A5%E7%BD%91%E5%92%8C%E7%89%A9%E7%90%86%E5%AA%92%E4%BD%93"><span class="toc-number">2.</span> <span class="toc-text">接入网和物理媒体</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%AA%92%E4%BD%93%E7%AC%AC0%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text">物理媒体：第 0 层</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#internet%E7%BB%93%E6%9E%84%E5%92%8Cisp"><span class="toc-number">4.</span> <span class="toc-text">Internet 结构和 ISP</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%BB%B6%E6%97%B6-%E4%B8%A2%E5%A4%B1%E5%92%8C%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">5.</span> <span class="toc-text">分组延时、丢失和吞吐量</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E5%B1%82%E6%AC%A1%E5%92%8C%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">6.</span> <span class="toc-text">协议层次和服务模型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2"><span class="toc-number">7.</span> <span class="toc-text">计算机网络的发展历史</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/computer-science/computer-networks/Chapter-1-Computer-Networks-and-the-Internet/" rel="bookmark" title="Chapter 1 Computer Networks and the Internet">Chapter 1 Computer Networks and the Internet</a></li><li><a href="/computer-science/computer-networks/Chapter-2-Application-Layer/" rel="bookmark" title="Chapter 2 Application Layer">Chapter 2 Application Layer</a></li><li><a href="/computer-science/computer-networks/Chapter-3-Transport-Layer/" rel="bookmark" title="Chapter 3 Transport Layer">Chapter 3 Transport Layer</a></li><li><a href="/computer-science/computer-networks/Chapter-4-The-Network-Layer-Data-Plane/" rel="bookmark" title="Chapter 4 The Network Layer: Data Plane">Chapter 4 The Network Layer: Data Plane</a></li><li><a href="/computer-science/computer-networks/Chapter-5-The-Network-Layer-Control-Plane/" rel="bookmark" title="Chapter 5 The Network Layer: Control Plane">Chapter 5 The Network Layer: Control Plane</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Sunforge" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Sunforge</p><div class="description" itemprop="description">计科人笔记</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">18</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">12</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">5</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0JFQVRJTkctSEVBUlQ=" title="https:&#x2F;&#x2F;github.com&#x2F;BEATING-HEART"><i class="ic i-github"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmJlYXRpbmdfaGVhcnRAeWVhaC5uZXQ=" title="mailto:beating_heart@yeah.net"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-person"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-magic"></i>魔盒</a><ul class="submenu"><li class="item"><a href="/webstack/" rel="section"><i class="ic i-star"></i>网址</a></li><li class="item"><a href="/books/" rel="section"><i class="ic i-clipboard"></i>书架</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/hexo/%E6%9B%B4%E6%96%B0Hexo%E4%B8%BB%E9%A2%98%E4%B8%BAShoka/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/computer-networks/Chapter-2-Application-Layer/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/hexo/" title="分类于 Hexo 博客">Hexo 博客</a></div><span><a href="/computer-science/hexo/%E7%94%A8Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BD%BF%E7%94%A8Pure%E4%B8%BB%E9%A2%98%EF%BC%89%E5%B9%B6%E6%89%98%E7%AE%A1%E5%88%B0Github-Page/" title="用Hexo搭建个人博客（使用Pure主题）并托管到Github Page">用Hexo搭建个人博客（使用Pure主题）并托管到Github Page</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%9F%BA%E6%9C%AC%E6%B3%95%E5%88%99/" title="分类于 基本法则">基本法则</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%9F%BA%E6%9C%AC%E6%B3%95%E5%88%99/%E6%95%B0%E5%AD%A6/" title="分类于 数学">数学</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%9F%BA%E6%9C%AC%E6%B3%95%E5%88%99/%E6%95%B0%E5%AD%A6/%E5%87%B8%E4%BC%98%E5%8C%96/" title="分类于 凸优化">凸优化</a></div><span><a href="/fundamental/math/convex-optimization/index/" title="凸优化：索引">凸优化：索引</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%9F%BA%E6%9C%AC%E6%B3%95%E5%88%99/" title="分类于 基本法则">基本法则</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%9F%BA%E6%9C%AC%E6%B3%95%E5%88%99/%E6%95%B0%E5%AD%A6/" title="分类于 数学">数学</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%9F%BA%E6%9C%AC%E6%B3%95%E5%88%99/%E6%95%B0%E5%AD%A6/%E5%87%B8%E4%BC%98%E5%8C%96/" title="分类于 凸优化">凸优化</a></div><span><a href="/fundamental/math/convex-optimization/Chapter-2-Convex-sets/" title="凸优化第二章：凸集">凸优化第二章：凸集</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/hexo/" title="分类于 Hexo 博客">Hexo 博客</a></div><span><a href="/computer-science/hexo/%E4%BD%BF%E7%94%A8Github%E7%AE%A1%E7%90%86Hexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E7%A0%81%EF%BC%8C%E5%B9%B6%E9%85%8D%E7%BD%AEGithub-Action%E8%87%AA%E5%8A%A8%E7%BC%96%E8%AF%91%E9%83%A8%E7%BD%B2/" title="通过Github管理Hexo博客源码，并配置Github Action自动编译部署">通过Github管理Hexo博客源码，并配置Github Action自动编译部署</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/" title="分类于 强化学习">强化学习</a></div><span><a href="/computer-science/reinforcement-learning/index/" title="强化学习：索引">强化学习：索引</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="分类于 计算机网络">计算机网络</a></div><span><a href="/computer-science/computer-networks/Chapter-5-The-Network-Layer-Control-Plane/" title="Chapter 5 The Network Layer: Control Plane">Chapter 5 The Network Layer: Control Plane</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="分类于 计算机网络">计算机网络</a></div><span><a href="/computer-science/computer-networks/Chapter-2-Application-Layer/" title="Chapter 2 Application Layer">Chapter 2 Application Layer</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/hexo/" title="分类于 Hexo 博客">Hexo 博客</a></div><span><a href="/computer-science/hexo/%E4%BD%BF%E7%94%A8vercel%E6%89%98%E7%AE%A1Hexo%E5%8D%9A%E5%AE%A2%EF%BC%8C%E8%A7%A3%E5%86%B3github-io%E6%97%A0%E6%B3%95%E8%A2%ABbaidu%E6%94%B6%E5%BD%95%E7%9A%84%E9%97%AE%E9%A2%98/" title="使用vercel托管Hexo博客，解决github.io无法被baidu收录的问题">使用vercel托管Hexo博客，解决github.io无法被baidu收录的问题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" title="分类于 机器学习">机器学习</a></div><span><a href="/computer-science/machine-learning/index/" title="机器学习：索引">机器学习：索引</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/computer-science/data-structures-and-algorithms/index/" title="数据结构与算法：索引">数据结构与算法：索引</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Sunforge @ Sunforge</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">124k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">1:53</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/computer-networks/Chapter-1-Computer-Networks-and-the-Internet/",favicon:{show:"但你不会停止思考，对吗？",hide:"这个世界真复杂啊 | Sunforge"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//fastly.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>